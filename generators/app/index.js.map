{"version":3,"file":"index.js","names":["yosay","require","VerdaccioPluginGenerator","Generator","projectName","destinationPathName","constructor","args","opts","props","prompting","log","chalk","red","prompts","type","name","message","default","validate","input","store","choices","value","filter","keywords","_","uniq","words","concat","prompt","then","_props","githubUsername","license","repository","resolve","bind","packageJSON","pluginType","pkgJsonLocation","fs","copyTpl","templatePath","destinationPath","writing","copy","install","process","chdir","module","exports"],"sources":["index.ts"],"sourcesContent":["import {resolve} from 'path';\n\nimport Generator from 'yeoman-generator';\nimport chalk from 'chalk';\nimport _ from 'lodash';\n\ntype propsTypes = {\n  name?: string;\n  pluginType?: string;\n  description?: string;\n  githubUsername?: string;\n  authorName?: string;\n  authorEmail?: string;\n  keywords?: string[];\n};\n\nconst yosay = require('yosay');\n\nclass VerdaccioPluginGenerator extends Generator {\n  private props: propsTypes;\n  private projectName = 'verdaccio-';\n  private destinationPathName = 'verdaccio-';\n  constructor(args, opts) {\n    super(args, opts);\n    this.props = {};\n  }\n\n  prompting() {\n    this.log(\n        yosay(\n            'Welcome to ' +\n          chalk.red('generator-verdaccio-plugin') +\n          ' plugin generator!',\n        ),\n    );\n\n    const prompts = [\n      {\n        type: 'input',\n        name: 'name',\n        require: true,\n        message: 'What is the name of your plugin?',\n        default: 'customname',\n        validate: function(input) {\n          return input !== '';\n        },\n      },\n      {\n        type: 'list',\n        name: 'pluginType',\n        require: true,\n        message: 'What kind of plugin you want to create?',\n        store: true,\n        choices: [\n          {value: 'auth'},\n          {value: 'storage'},\n          {value: 'middleware'},\n        ],\n      },\n      {\n        type: 'input',\n        name: 'description',\n        message: 'Please, describe your plugin',\n        default: 'An amazing verdaccio plugin',\n      },\n      {\n        name: 'githubUsername',\n        message: 'GitHub username or Organization',\n        validate: function(input) {\n          return input !== '';\n        },\n      },\n      {\n        name: 'authorName',\n        message: 'Author\\'s Name',\n        store: true,\n      },\n      {\n        name: 'authorEmail',\n        message: 'Author\\'s Email',\n        store: true,\n      },\n      {\n        name: 'keywords',\n        message: 'Key your keywords (comma to split)',\n        filter: function(keywords) {\n          return _.uniq(_.words(keywords).concat(['verdaccio-']));\n        },\n      },\n    ];\n\n    return this.prompt(prompts).then(\n        function(_props) {\n        // To access props later use this.props.someAnswer;\n        // @ts-ignore\n          this.props = _props;\n          const {name, githubUsername} = _props;\n          // @ts-ignore\n          this.props.license = 'MIT';\n          if (githubUsername) {\n          // @ts-ignore\n            this.props.repository = githubUsername + '/' + name;\n          }\n\n          // @ts-ignore\n          this.projectName = `verdaccio-${name}`;\n\n          // @ts-ignore\n          this.destinationPathName = resolve(this.projectName);\n          // @ts-ignore\n          this.props.name = this.projectName;\n        }.bind(this),\n    );\n  }\n\n  packageJSON() {\n    const {pluginType} = this.props;\n    const pkgJsonLocation = `typescript/${pluginType}/_package.json`;\n    this.fs.copyTpl(\n        this.templatePath(pkgJsonLocation),\n        this.destinationPath(resolve(this.destinationPathName, 'package.json')),\n        this.props,\n    );\n  }\n\n  writing() {\n    this.fs.copy(\n        this.templatePath(`typescript/common/gitignore`),\n        this.destinationPath(resolve(this.destinationPathName, '.gitignore')),\n    );\n    this.fs.copy(\n        this.templatePath(`typescript/common/npmignore`),\n        this.destinationPath(resolve(this.destinationPathName, '.npmignore')),\n    );\n    this.fs.copy(\n        this.templatePath(`typescript/common/jest.config.js`),\n        this.destinationPath(resolve(this.destinationPathName, 'jest.config.js')),\n    );\n    this.fs.copyTpl(\n        this.templatePath(`typescript/common/README.md`),\n        this.destinationPath(resolve(this.destinationPathName, 'README.md')),\n        this.props,\n    );\n    this.fs.copyTpl(\n        this.templatePath(`typescript/common/eslintrc`),\n        this.destinationPath(resolve(this.destinationPathName, '.eslintrc')),\n        this.props,\n    );\n    this.fs.copyTpl(\n        this.templatePath(`typescript/common/eslintignore`),\n        this.destinationPath(resolve(this.destinationPathName, '.eslintignore')),\n        this.props,\n    );\n\n    this.fs.copy(\n        this.templatePath(`typescript/${this.props.pluginType}/src`),\n        this.destinationPath(resolve(this.destinationPathName, 'src')),\n    );\n\n    this.fs.copy(\n        this.templatePath(\n            `typescript/common/index.ts`,\n        ),\n        this.destinationPath(\n            resolve(\n                this.destinationPathName,\n                `index.ts`,\n            ),\n        ),\n    );\n\n    this.fs.copy(\n        this.templatePath(`typescript/common/tsconfig.json`),\n        this.destinationPath(\n            resolve(this.destinationPathName, 'tsconfig.json'),\n        ),\n    );\n    this.fs.copy(\n        this.templatePath(`typescript/${this.props.pluginType}/types`),\n        this.destinationPath(resolve(this.destinationPathName, 'types')),\n    );\n\n    this.fs.copy(\n        this.templatePath(`typescript/common/editorconfig`),\n        this.destinationPath(resolve(this.destinationPathName, '.editorconfig')),\n    );\n  }\n\n  install() {\n    process.chdir(this.projectName);\n    // this.installDependencies({ npm: true, bower: false });\n  }\n}\n\nmodule.exports = VerdaccioPluginGenerator;\n"],"mappings":"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"}